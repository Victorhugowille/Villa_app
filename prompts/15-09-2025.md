### üìÑ Arquivo: `prompts/15-09-2025.md`
**Foco:** Seguran√ßa e Isolamento de Dados (Auth).

```markdown
# Prompt: Autentica√ß√£o e Multi-Empresa

**Data:** 15/09/2025
**Contexto:** Preocupa√ß√£o em como separar os dados de um restaurante de outro.

## üó£Ô∏è Prompt do Usu√°rio
"Como eu garanto que um restaurante n√£o veja os dados do outro? Vou ter v√°rios usu√°rios usando o mesmo banco Supabase.
Crie o Provider de Autentica√ß√£o que resolve isso."

## ü§ñ Resposta (L√≥gica AuthProvider)

A solu√ß√£o √© usar o `company_id`. Cada usu√°rio logado pertence a uma empresa.

### C√≥digo: `lib/providers/auth_provider.dart`
*(Trecho da l√≥gica implementada)*

```dart
class AuthProvider with ChangeNotifier {
  User? _user;
  String? _companyId;

  // Ao carregar o usu√°rio, extra√≠mos o ID da empresa dos metadados
  void _handleUserChange(User? user) {
    _user = user;
    if (_user != null && _user!.appMetadata.containsKey('company_id')) {
      _companyId = _user!.appMetadata['company_id'];
    }
    notifyListeners();
  }
  
  // O companyId ser√° usado em TODOS os outros providers para filtrar dados.
}